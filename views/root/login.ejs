<%- contentFor('content') %>  
<!-- Login -->
<main>
    <!-- Display page flexible -->
    <div class="d-flex justify-content-center vh-100 bg-credential">
        <!-- Center display -->
        <div class="m-auto">
            <!-- Card to contain it -->
            <div class="card shadow-lg">
                <h1 class="text-center mb-3 mt-5">Login
                    <!-- Return to main page -->
                    <button type="button" class="btn-close position-absolute fs-5" style="left: 90%; bottom: 92%;" aria-label="Close" onclick="window.location='/'"></button>
                </h1>
                <!-- Form update -->
                <form class="p-3" action="/login" method="post">
                    <!-- Input form -->
                    <div style="min-width: 30vw; max-width: 30vw;">
                        <!-- Input name with validation -->
                        <div class="mb-3">
                            <label for="username" class="col-form-label">Username <i class="bi bi-info-circle opacity-75" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="Enter a valid username. Example: (abcde)" style="font-size: 13px;"></i></label>
                            <input type="text" class="form-control
                            <% if(err != 'undefined') { %>
                                <% err.forEach((error) => { %>
                                    <%= error.param === "username" ? 'is-invalid' : '' %>
                                <% }) %>
                            <% } %>
                            " 
                            id="username" name="username" placeholder="New Username" />
                            <% if(err != 'undefined') { %>
                                <% err.forEach((error) => { %>
                                <div id="validationUsernameServer" class="invalid-feedback"> 
                                    <%= error.param === "username" ? error.msg : '' %>
                                </div>
                                <% }) %>
                            <% } %>
                        </div>
                        <!-- Input password with validation -->
                        <div id="show_hide_password" class="mb-3">
                            <label for="password" class="col-form-label">Password <i class="bi bi-info-circle opacity-75" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="Enter password with combination of at least a lower case, upper case, number, and special character with more than 8 characters. Example: (Abcde12!)" style="font-size: 13px;"></i></label>
                            <button type="button" class="pass-mask">
                                <i
                                    class="bi bi-eye-slash-fill opacity-50"
                                    aria-hidden="true">
                                </i>
                            </button>
                            <input type="password" class="form-control
                            <% if(err != 'undefined') { %>
                                <% err.forEach((error) => { %>
                                    <%= error.param === "password" ? 'is-invalid' : '' %>
                                <% }) %>
                            <% } %>
                            "
                            name="password" id="password" placeholder="Strong Password" />
                            <% if(err != 'undefined') { %>
                                <% err.forEach((error) => { %>
                                <div id="validationPasswordServer" class="invalid-feedback position-absolute w-errpass">
                                    <%= error.param === "password" ? error.msg : '' %>
                                </div>
                                <% }) %>
                            <% } %>
                            <!-- Forget column -->
                            <a class="position-absolute text-decoration-none mt-1" style="left: 71.25%; font-size: .875rem" href="/reset">Forgot Password?</a>
                        </div>
                    </div>
                    <!-- Submit form -->
                    <% if (newuser.username !== undefined) { %>
                        <div class="d-flex gap-2 justify-content-between pt-4">
                            <div class="alert alert-success m-0 px-2 py-1" role="alert">
                                <i class="bi bi-check-circle-fill"></i> Register success! 
                            </div>
                            <button type="submit" class="btn btn-primary">
                                Submit
                            </button>
                        </div>
                    <% } else { %>
                        <button type="submit" class="btn btn-primary mt-4 float-end">
                            Submit
                        </button>
                    <% } %>
                </form>
                <% if (newuser.username === undefined) { %>
                    <hr class="m-0">
                    <!-- Register column -->
                    <div class="mx-auto my-3">Doesn't have an account? <a class="text-decoration-none" href="/register">Make one</a></div>
                <% } %>
            </div>
            <!-- Anchor to return back to contact page -->
        </div>
    </div>
</main>
